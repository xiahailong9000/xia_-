<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>UGUI 高级时间插件</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 11.00.10570.1001"><LINK rel=stylesheet 
href="_template.css"></HEAD>
<BODY>
<DIV id=nsbanner>
<DIV id=bannerrow1>
<TABLE class=bannerparthead>
  <TBODY>
  <TR id=hdr>
    <TD class=runninghead noWrap>wwwwww</TD></TR></TBODY></TABLE></DIV>
<DIV id=titlerow>
<H1 class=dtH1>UGUI 高级时间插件</H1></DIV></DIV>
<DIV id=nstext><BR>
<P>using UnityEngine;<BR>using System.Collections;<BR>using 
UnityEngine.EventSystems;<BR>public class C_UGUI : 
UnityEngine.EventSystems.EventTrigger{<BR>&nbsp;&nbsp;&nbsp; public delegate 
void VoidDelegate(GameObject go);<BR>&nbsp;&nbsp;&nbsp; public delegate void 
BoolDelegate(GameObject go, bool state);<BR>&nbsp;&nbsp;&nbsp; public delegate 
void FloatDelegate(GameObject go, float delta);<BR>&nbsp;&nbsp;&nbsp; public 
delegate void VectorDelegate(GameObject go, Vector2 
delta);<BR>&nbsp;&nbsp;&nbsp; public delegate void ObjectDelegate(GameObject go, 
GameObject obj);<BR>&nbsp;&nbsp;&nbsp; public delegate void 
KeyCodeDelegate(GameObject go, KeyCode key);<BR>&nbsp;&nbsp;&nbsp; public 
VoidDelegate o_点击;<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate 
o_点击_0;<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate o_点击_1;<BR>&nbsp;&nbsp;&nbsp; 
public VoidDelegate o_点击_2;</P>
<P>&nbsp;&nbsp;&nbsp; public VoidDelegate o_按下;<BR>&nbsp;&nbsp;&nbsp; public 
VoidDelegate o_按下_0;<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate 
o_按下_1;<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate o_按下_2;</P>
<P>&nbsp;&nbsp;&nbsp; public VoidDelegate o_进入;</P>
<P>&nbsp;&nbsp;&nbsp; public VoidDelegate o_离开;</P>
<P>&nbsp;&nbsp;&nbsp; public VoidDelegate o_抬起;<BR>&nbsp;&nbsp;&nbsp; public 
VoidDelegate o_抬起_0;<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate 
o_抬起_1;<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate o_抬起_2;</P>
<P>&nbsp;&nbsp;&nbsp; public VoidDelegate onSelect;<BR>&nbsp;&nbsp; 
<BR>&nbsp;&nbsp;&nbsp; public VoidDelegate onUpdateSelect;<BR>&nbsp;&nbsp;&nbsp; 
/// &lt;summary&gt;<BR>&nbsp;&nbsp;&nbsp; /// &lt;para&gt;C_UGUI.Get( gameObject 
).o_按下_0 = delegate( GameObject go ){ print("右键点击了"); 
};&lt;/para&gt;<BR>&nbsp;&nbsp;&nbsp; /// &lt;para&gt;需要在模型上加： 碰撞器组件 BoxCollider 
&lt;/para&gt;<BR>&nbsp;&nbsp;&nbsp; /// &lt;para&gt;需要在摄像机上加： PhysicsRaycaster 
_组件 &lt;/para&gt;<BR>&nbsp;&nbsp;&nbsp; /// &lt;para&gt;场景中还需要有UGUI的 EvenSystem 
组件 &lt;/para&gt;<BR>&nbsp;&nbsp;&nbsp; /// 
&lt;/summary&gt;<BR>&nbsp;&nbsp;&nbsp; static public C_UGUI Get(GameObject 
go){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C_UGUI listener = 
go.GetComponent&lt;C_UGUI&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (listener == null) listener = 
go.AddComponent&lt;C_UGUI&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
return listener;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; static public 
C_UGUI Get(Transform transform){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C_UGUI listener = 
transform.GetComponent&lt;C_UGUI&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (listener == null) listener = 
transform.gameObject.AddComponent&lt;C_UGUI&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
return listener;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override 
void OnPointerClick(PointerEventData 
eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (o_点击 != null) 
o_点击(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(eventData.button == 
UnityEngine.EventSystems.PointerEventData.InputButton.Left){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (o_点击_0 != null) 
o_点击_0(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else if 
(eventData.button == 
UnityEngine.EventSystems.PointerEventData.InputButton.Right){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (o_点击_1 != null) 
o_点击_1(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}else{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(o_点击_2 != null) 
o_点击_2(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override void 
OnPointerDown(PointerEventData 
eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (o_按下 != null) 
o_按下(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(eventData.button == 
UnityEngine.EventSystems.PointerEventData.InputButton.Left){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (o_按下_0 != null) 
o_按下_0(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else if 
(eventData.button == 
UnityEngine.EventSystems.PointerEventData.InputButton.Right){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (o_按下_1 != null) 
o_按下_1(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}else{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(o_按下_2 != null) 
o_按下_2(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override void 
OnPointerEnter(PointerEventData 
eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (o_进入 != null) 
o_进入(gameObject);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override 
void OnPointerExit(PointerEventData 
eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (o_离开 != null) 
o_离开(gameObject);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override 
void OnPointerUp(PointerEventData 
eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (o_抬起 != null) 
o_抬起(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(eventData.button == 
UnityEngine.EventSystems.PointerEventData.InputButton.Left){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (o_抬起_0 != null) 
o_抬起_0(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }else if 
(eventData.button == 
UnityEngine.EventSystems.PointerEventData.InputButton.Right){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (o_抬起_1 != null) 
o_抬起_1(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}else{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(o_抬起_2 != null) 
o_抬起_2(gameObject);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override void 
OnSelect(BaseEventData eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if (onSelect != null) onSelect(gameObject);</P>
<P>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public override void 
OnUpdateSelected(BaseEventData 
eventData){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (onUpdateSelect != 
null) onUpdateSelect(gameObject);<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>using UnityEngine;<BR>using System.Collections;<BR>using 
UnityEngine.UI;<BR>public class UGUI_ss : MonoBehaviour{<BR>&nbsp;&nbsp;&nbsp; 
public&nbsp;&nbsp; bool isUp;<BR>&nbsp;&nbsp;&nbsp; public&nbsp; Image 
img;<BR>&nbsp;&nbsp;&nbsp; void 
Start(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C_UGUI.Get(gameObject).onDown = delegate(GameObject go) { 
go.GetComponent&lt;MeshRenderer&gt;().material.color = Color.red; 
};<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C_UGUI.Get(gameObject).onDown 
+= (go) =&gt; { Debug.Log("按下！"); 
};<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C_UGUI.Get(gameObject).onUp += 
(go) =&gt; { Debug.Log("抬起！"); };<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C_UGUI.Get(gameObject).onSelect += (go) =&gt; { Debug.Log("选中！"); 
};<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C_UGUI.Get(gameObject).onEnter 
+= (go) =&gt; { Debug.Log("进入！"); 
};<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C_UGUI.Get(gameObject).onExit 
+= (go) =&gt; { Debug.Log("退出！"); 
};<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; img = 
transform.Find("Image").GetComponent&lt;Image&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C_UGUI.Get(gameObject).onDown += 
S_002;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C_UGUI.Get(gameObject).onUp 
+= S_003;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; void S_002(GameObject 
go){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isUp = 
false;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; img.color = new Color(0, 0, 
0, 1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
StartCoroutine(I_005());<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; void 
S_003(GameObject go){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; isUp = true; 
;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; private IEnumerator 
I_005(){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while 
(true){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(isUp) { break; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
img.color += new Color(1, 1, 1, 1) * Time.deltaTime * 
0.1f;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
img.fillAmount += 0.5f * 
Time.deltaTime;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
yield return null;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><FONT color=#ff0000>//圆盘滑动旋转----------------------------</FONT></P>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C_UI.S_OnDrag(o_试验版.gameObject).o_拖动事件=delegate(PointerEventData zData) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Vector3 
vv=Input.mousePosition-o_试验版.transform.position;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Vector3 z偏角=new Vector3( 
vv.x+zData.delta.x,vv.y+zData.delta.y,0);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
float z角度= 
Vector3.Angle(vv,z偏角);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Vector3 
ff=Vector3.Cross(vv,z偏角);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if(ff.z&lt;0) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
z角度*=-1;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_试验版.transform.localEulerAngles+=Vector3.forward*z角度;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
};</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></DIV></BODY></HTML>
