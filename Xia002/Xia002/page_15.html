<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>鼠标拖动物体</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 11.00.9600.18125"><LINK rel=stylesheet 
href="_template.css"></HEAD>
<BODY>
<DIV id=nsbanner>
<DIV id=bannerrow1>
<TABLE class=bannerparthead>
  <TBODY>
  <TR id=hdr>
    <TD class=runninghead noWrap><FONT 
size=3>wwwwww</FONT></TD></TR></TBODY></TABLE></DIV>
<DIV id=titlerow>
<H1 class=dtH1><FONT size=3>鼠标拖动物体</FONT></H1></DIV></DIV>
<DIV id=nstext><BR>
<P><FONT color=#000000 size=3>using UnityEngine;<BR>using 
System.Collections;<BR>public class C_fff : MonoBehaviour {<BR>&nbsp;public 
static GameObject o_中心物体;<BR>&nbsp;void Start () 
{<BR>&nbsp;&nbsp;C_UGUI.Get(gameObject).o_按下=delegate(GameObject go) 
{<BR>&nbsp;&nbsp;&nbsp;if(o_中心物体==null) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;o_中心物体=new 
GameObject();<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;o_中心物体.transform.position=transform.position;<BR>&nbsp;&nbsp;&nbsp;o_中心物体.transform.localEulerAngles=transform.localEulerAngles;<BR>&nbsp;&nbsp;&nbsp;StartCoroutine(I_水平方向拖动());<BR>&nbsp;&nbsp;};<BR>&nbsp;}<BR>&nbsp;IEnumerator 
I_水平方向拖动() {<BR>&nbsp;&nbsp;Vector3 
i_自身初始值=o_中心物体.transform.position;<BR>&nbsp;&nbsp;Vector3 
v_鼠标初始值=Camera.main.ScreenToWorldPoint(new 
Vector3(Input.mousePosition.x,Input.mousePosition.y,Camera.main.WorldToScreenPoint(i_自身初始值).z));<BR>&nbsp;&nbsp;while(Input.GetMouseButton(0)) 
{<BR>&nbsp;&nbsp;&nbsp;Vector3 v_鼠标当期值=Camera.main.ScreenToWorldPoint(new 
Vector3(Input.mousePosition.x,Input.mousePosition.y,Camera.main.WorldToScreenPoint(i_自身初始值).z));<BR>&nbsp;&nbsp;&nbsp;transform.position=i_自身初始值+(v_鼠标当期值-v_鼠标初始值)*2;<BR>&nbsp;&nbsp;&nbsp;yield 
return null;<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>}</FONT></P>
<P><FONT size=3></FONT></P></DIV>
<DIV class=footer>
<P><FONT color=#ff0000 
size=3>//-------------------鼠标拖动水平方向移动-------------------------------------------------</FONT></P>
<P><FONT size=3>using UnityEngine;<BR>using System.Collections;</FONT></P>
<P><FONT size=3>public class C_kkk : MonoBehaviour {<BR>&nbsp;void Start () 
{<BR>&nbsp;&nbsp;C_UGUI.Get(gameObject).o_按下_0=delegate(GameObject go) 
{<BR>&nbsp;&nbsp;&nbsp;StartCoroutine(I_平移按下2());<BR>&nbsp;&nbsp;};<BR>&nbsp;}&nbsp;<BR>&nbsp;IEnumerator 
I_平移按下2() {<BR>&nbsp;&nbsp;Vector3 
i_自身初始值=transform.position;<BR>&nbsp;&nbsp;Vector3 
v_鼠标初始值=Camera.main.ScreenToWorldPoint(new 
Vector3(Input.mousePosition.x,Input.mousePosition.y,Camera.main.WorldToScreenPoint(i_自身初始值).z));</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;Vector2 
i_原点=Camera.main.WorldToScreenPoint(transform.position);<BR>&nbsp;&nbsp;i_原点=new 
Vector2(i_原点.x,Screen.height-i_原点.y);</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;Vector2 i_鼠标初始值=new 
Vector3(Input.mousePosition.x,Input.mousePosition.y);<BR>&nbsp;&nbsp;i_鼠标初始值=new 
Vector2(i_鼠标初始值.x,Screen.height-i_鼠标初始值.y);<BR>&nbsp;&nbsp;while(Input.GetMouseButton(0)) 
{<BR>&nbsp;&nbsp;&nbsp;Vector2 i_鼠标当前值=new 
Vector2(Input.mousePosition.x,Input.mousePosition.y);<BR>&nbsp;&nbsp;&nbsp;i_鼠标当前值=new 
Vector2(i_鼠标当前值.x,Screen.height-i_鼠标当前值.y);<BR>&nbsp;&nbsp;&nbsp;//=====================y轴变换================================================================================================================<BR>&nbsp;&nbsp;&nbsp;Vector2 
i_目标点=Camera.main.WorldToScreenPoint(i_自身初始值+transform.TransformDirection(2,0,0));<BR>&nbsp;&nbsp;&nbsp;i_目标点=new 
Vector2(i_目标点.x,Screen.height-i_目标点.y);</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;Vector2 
i_方向=i_鼠标当前值-i_鼠标初始值;<BR>&nbsp;&nbsp;&nbsp;Vector2 i_目标方向=i_目标点-i_原点;</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;float 
i_弧度=Vector2.Angle(i_方向,i_目标方向)/180*Mathf.PI;</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;float 
i_距离=Vector2.Distance(i_鼠标初始值,i_鼠标当前值);<BR>&nbsp;&nbsp;&nbsp;float 
i_长度=Mathf.Cos(i_弧度)*i_距离;</FONT></P>
<P><FONT 
size=3>&nbsp;&nbsp;&nbsp;//======================x轴变换================================================================================================<BR>&nbsp;&nbsp;&nbsp;Vector2 
i_目标点2=Camera.main.WorldToScreenPoint(i_自身初始值+transform.TransformDirection(0,0,2));///===========================================<BR>&nbsp;&nbsp;&nbsp;i_目标点2=new 
Vector2(i_目标点2.x,Screen.height-i_目标点2.y);////===========================================</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;Vector2 
i_方向2=i_鼠标当前值-i_鼠标初始值;////===========================================<BR>&nbsp;&nbsp;&nbsp;Vector2 
i_目标方向2=i_目标点2-i_原点;////===========================================</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;float 
i_弧度2=Vector2.Angle(i_方向2,i_目标方向2)/180*Mathf.PI;////===========================================</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;float 
i_距离2=Vector2.Distance(i_鼠标初始值,i_鼠标当前值);/////===========================================<BR>&nbsp;&nbsp;&nbsp;float 
i_长度2=Mathf.Cos(i_弧度2)*i_距离2;////===========================================</FONT></P>
<P><FONT 
size=3>&nbsp;&nbsp;&nbsp;transform.position=i_自身初始值+transform.TransformDirection(new 
Vector3(i_长度*0.02f,0,i_长度2*0.02f));<BR>&nbsp;&nbsp;&nbsp;yield return 
null;<BR>&nbsp;&nbsp;}<BR>&nbsp;}</FONT></P>
<P><FONT size=3>}</FONT></P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT color=#ff0000 
size=3>//-----------------通过鼠标在平幕上的X,Y的值,换算出物体在地面上对应的值,--------------------------------------</FONT></P>
<P><FONT size=3>using UnityEngine;<BR>using System.Collections;<BR>public class 
C_fff : MonoBehaviour {<BR>&nbsp; GameObject o_平移辅助物体;<BR>&nbsp; Transform 
o_相机变换;<BR>&nbsp; float v_y轴角度,v_x轴角度,y偏移,x偏移;<BR>&nbsp;void Start () 
{<BR>&nbsp;&nbsp;o_相机变换=Camera.main.transform;<BR>&nbsp;&nbsp;o_平移辅助物体=new 
GameObject("Camera平移辅助物体");<BR>&nbsp;&nbsp;o_平移辅助物体.transform.position=new 
Vector3(o_相机变换.position.x,0,o_相机变换.position.z);<BR>&nbsp;&nbsp;o_平移辅助物体.transform.localEulerAngles=new 
Vector3(0,o_相机变换.localEulerAngles.y,0);<BR>&nbsp;}<BR>&nbsp;void Update() 
{<BR>&nbsp;&nbsp;StartCoroutine(S_kk());&nbsp;&nbsp;<BR>&nbsp;}<BR>&nbsp;IEnumerator 
S_kk() {<BR>&nbsp;&nbsp;while(Input.GetMouseButton(0)) 
{<BR>&nbsp;&nbsp;&nbsp;//通过鼠标在平幕上的X,Y的值,换算出物体在地面上对应的值,<BR>&nbsp;&nbsp;&nbsp;//相机作为参考物体+换算的偏移值<BR>&nbsp;&nbsp;&nbsp;float 
v_相机视角=Camera.main.fieldOfView;<BR>&nbsp;&nbsp;&nbsp;float 
v_弧度视角=Mathf.PI/360*v_相机视角;<BR>&nbsp;&nbsp;&nbsp;float 
v_相机焦距=Screen.height/(2*Mathf.Tan(v_弧度视角));</FONT></P>
<P><FONT size=3>&nbsp;&nbsp;&nbsp;Vector3 v_中心向量=new 
Vector3(0,0,v_相机焦距);<BR>&nbsp;&nbsp;&nbsp;Vector3 v_y轴偏移向量=new 
Vector3(0,Input.mousePosition.y-Screen.height/2,v_相机焦距);<BR>&nbsp;&nbsp;&nbsp;Vector3 
v_x轴偏移向量=new 
Vector3(Input.mousePosition.x-Screen.width/2,0,v_相机焦距);<BR>&nbsp;&nbsp;&nbsp;v_y轴角度=Vector3.Angle(v_中心向量,v_y轴偏移向量);<BR>&nbsp;&nbsp;&nbsp;v_x轴角度=Vector3.Angle(v_中心向量,v_x轴偏移向量);<BR>&nbsp;&nbsp;&nbsp;if(Input.mousePosition.y-Screen.height/2&lt;0) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;v_y轴角度=-v_y轴角度;<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;v_y轴角度=v_y轴角度+90-o_相机变换.localEulerAngles.x;<BR>&nbsp;&nbsp;&nbsp;if(Input.mousePosition.x-Screen.width/2&lt;0) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;v_x轴角度=-v_x轴角度;<BR>&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;float 
v弧度y=Mathf.PI/180*v_y轴角度;<BR>&nbsp;&nbsp;&nbsp;float 
v弧度x=Mathf.PI/180*v_x轴角度;<BR>&nbsp;&nbsp;&nbsp;if(v_y轴角度&lt;85) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;float 
v中心距离=o_相机变换.position.y/Mathf.Cos(v弧度y);<BR>&nbsp;&nbsp;&nbsp;&nbsp; 
x偏移=Mathf.Tan(v弧度x)*v中心距离;<BR>&nbsp;&nbsp;&nbsp;&nbsp;y偏移=o_相机变换.position.y*Mathf.Tan(v弧度y);<BR>&nbsp;&nbsp;&nbsp;&nbsp;transform.position=o_平移辅助物体.transform.TransformDirection(new 
Vector3(x偏移,0,y偏移))+new 
Vector3(o_相机变换.position.x,0,o_相机变换.position.z);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;yield 
return null;<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>}<BR></FONT></P></DIV></BODY></HTML>
