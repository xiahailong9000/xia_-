<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Topic 2</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 11.00.10570.1001"><LINK rel=stylesheet 
href="_template.css"></HEAD>
<BODY>
<DIV id=nsbanner>
<DIV id=bannerrow1>
<TABLE class=bannerparthead>
  <TBODY>
  <TR id=hdr>
    <TD class=runninghead noWrap>wwwwww</TD></TR></TBODY></TABLE></DIV>
<DIV id=titlerow>
<H1 class=dtH1>Topic 2</H1></DIV></DIV>
<DIV id=nstext><BR>
<P><FONT size=3>using System;<BR>using System.Configuration;<BR>using 
MySql.Data.MySqlClient;<BR>public class 
TestDatebase{//数据库名:test/表名:student/字段名:id,姓名,年龄,学历/<BR>&nbsp;&nbsp;&nbsp; 
public static void Main(String[] 
args){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String mysqlStr = 
"Database=test;Data Source=127.0.0.1;User 
Id=root;Password=Xiahai132;pooling=false;CharSet=utf8;port=3306";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
MySqlConnection mysql = new 
MySqlConnection(mysqlStr);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String 
o_查询sql = "select * from student"; //查询所有字段<BR>&nbsp;&nbsp;&nbsp;&nbsp; // 
o_查询sql = "select * from student where 姓名='张三'"; 
//查询所有字段_条件约束查询(姓名为张三)<BR>&nbsp;&nbsp;&nbsp; //&nbsp; o_查询sql = "select * from 
student where 姓名 like '李%'"; 
//查询所有字段_条件模糊查询(姓李的人)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o_查询sql = 
"select 姓名 from student where id=12"; 
//精确查询<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String o_插入sql = "insert 
into student(姓名,年龄,学历) values 
('张三',25,'大专')";//添加新记录<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String 
o_修改sql = "update student set 姓名 ='芳芳'&nbsp; where id = 11"; //根据id 
来设定新的姓名<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String o_删除sql = "delete 
from student where id = 12"; //根据id 
来删除记录<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try{ 
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
MySqlCommand mySqlCommand = new MySqlCommand(o_查询sql, 
mysql);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
mySqlCommand = new MySqlCommand(o_插入sql, 
mysql);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp;&nbsp;&nbsp; 
mySqlCommand = new MySqlCommand(o_修改sql, 
mysql);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; 
mySqlCommand = new MySqlCommand(o_删除sql, 
mysql);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
mysql.Open();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
S_查询并获得结果集并遍历(mySqlCommand);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
//&nbsp;&nbsp; 
mySqlCommand.ExecuteNonQuery();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
mysql.Close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Console.WriteLine("成功");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }catch 
(Exception 
ex){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Console.WriteLine("失败&nbsp; "+ex);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String readLine = 
Console.ReadLine();<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public static 
void S_查询并获得结果集并遍历(MySqlCommand 
mySqlCommand){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MySqlDataReader 
reader = 
mySqlCommand.ExecuteReader();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while 
(reader.Read()){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if 
(reader.HasRows){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
//&nbsp;&nbsp;&nbsp;&nbsp; //&nbsp;&nbsp; Console.WriteLine("id:" + 
reader.GetInt32(0) + "|姓名:" + reader.GetString(1) + "|年龄:" + reader.GetInt32(2) 
+ "|学历:" + 
reader.GetString(3));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Console.WriteLine("id:" + 
reader.GetString(0));<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }catch 
(Exception){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Console.WriteLine("查询失败了！");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
finally{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
reader.Close();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>}</FONT></P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT color=#000000 size=3></FONT>&nbsp;</P></DIV>
<DIV class=footer>
<P><FONT size=3></FONT>&nbsp;</P><FONT color=#ff0000 size=3>
<P><FONT color=#ff0000 
size=3><STRONG>//------------------更新-----------------------</STRONG></FONT></P>
<P><FONT color=#000000 size=3>update &nbsp;表名&nbsp; set&nbsp; 
a=5,b=52&nbsp;&nbsp; where&nbsp; n=45 and m=48</FONT></P></FONT>
<P><FONT color=#ff0000 size=3><STRONG></STRONG></FONT>&nbsp;</P>
<P><FONT color=#ff0000 
size=3><STRONG>//---------------一次插入多条数据-------------------------------------</STRONG></FONT></P>
<P><FONT size=3>insert 表名 (ID,name) 
values('jerichen','gdsz'),('alone','gdgz');</FONT></P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT color=#ff0000 
size=3><STRONG>//---------------不存在就插入，存在就更新-------------------------------------</STRONG></FONT></P>
<P><FONT size=3>&nbsp;<FONT face=微软雅黑>REPLACE INTO 表名 (ID,name) 
values('4','Jame444s');</FONT></FONT></P>
<P><FONT size=3>&nbsp;<FONT face=微软雅黑>REPLACE INTO 表名 (ID,name) 
values('4','Jame444s'),('7','Jame444s');</FONT></FONT></P>
<P><FONT size=3 face=微软雅黑></FONT>&nbsp;</P>
<P><FONT color=#ff0000 
size=3><STRONG>//----------------------删除数据----------------------------------------</STRONG></FONT></P>
<P><FONT size=3>DELETE FROM v表名&nbsp; WHERE NAME ='22'</FONT></P>
<P><FONT color=#800000 
size=3>//查询------------------------------------------------</FONT></P>
<P><FONT size=3>SELECT a.X, a.Y FROM TB_CSYX_GRAPHICS a</FONT></P>
<P><FONT color=#ff0000 
size=3><STRONG>//------------多条件查询--------------------------and:且，or:或</STRONG></FONT></P><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3> select count(*) from `table` where `id1`=1 and `check`='b';</FONT></PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3>select * from 我的农场 where user_ID='5ff16828-3895-4f56-acd8-497a8f8fc245' and(`s02_物体类型`&lt;100 or `s04_物体等级`=1)</FONT></PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3></FONT>&nbsp;</PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3></FONT>&nbsp;</PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#ff0000 size=3><STRONG>//--------------------判断性输出--------------------------------------------------</STRONG></FONT></PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3>select <BR>&nbsp;&nbsp;&nbsp; case when a.A_ID = '5ff16828-3895-4f56-acd8-497a8f8fc245' then a.B_ID<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; when a.B_ID = '5ff16828-3895-4f56-acd8-497a8f8fc245' then a.A_ID<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else 'OK'<BR>&nbsp;&nbsp;&nbsp; end as status<BR>from `好友表` a where (A_ID='5ff16828-3895-4f56-acd8-497a8f8fc245') or (B_ID='5ff16828-3895-4f56-acd8-497a8f8fc245') ;</FONT></PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3></FONT>&nbsp;</PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#000000 size=3></FONT>&nbsp;</PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><FONT color=#ff0000 size=3><STRONG>//---------------------多表联合查询------------------------------------------------------------</STRONG></FONT></PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent">SELECT * FROM `好友表`,`我的农场`&nbsp; </PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent">&nbsp;</PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent"><STRONG><FONT color=#ff0000 size=3>//---------------------查询结果作为条件查询---------------------------------------</FONT></STRONG></PRE><PRE class="line mt-5 q-content" style="WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; WORD-BREAK: break-all; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/20px arial, 'courier new', courier, 宋体, monospace, 'Microsoft YaHei'; PADDING-LEFT: 0px; MARGIN: 8px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px" accuse="qContent">select a.ID,(select b.A_ID from `tb_好友表` b&nbsp; where b.B_ID = a.ID )hh from&nbsp; tb_user a </PRE>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P>
<P><FONT size=3></FONT>&nbsp;</P></DIV></BODY></HTML>
