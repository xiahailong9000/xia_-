<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>C_Client</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 11.00.9600.18315"><LINK rel=stylesheet 
href="_template.css"></HEAD>
<BODY>
<P>using System;<BR>using System.Collections.Generic;<BR>using 
System.Net.Sockets;<BR>using System.Text;<BR>using UnityEngine;<BR>public class 
C_TcpClient {<BR>&nbsp;&nbsp;&nbsp; public TcpClient 
o_客户端实体;<BR>&nbsp;&nbsp;&nbsp; string o_ip;<BR>&nbsp;&nbsp;&nbsp; public byte[] 
o_消息数据, o_长数据;<BR>&nbsp;&nbsp;&nbsp; public bool o_起始开关 = 
true;<BR>&nbsp;&nbsp;&nbsp; public int o_数据累加长度;<BR>&nbsp;&nbsp;&nbsp; public 
List&lt;byte[]&gt; o_数据集 = new List&lt;byte[]&gt;();&nbsp; 
<BR>&nbsp;&nbsp;&nbsp; public string 
O_ip{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
get{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(string.IsNullOrEmpty(o_ip)){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_ip = 
Application.absoluteURL;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_ip = o_ip.Remove(0, 
7);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_ip = 
o_ip.Split(@"/"[0])[0];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}catch{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
S_输出("获取网络IP出错",3);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
//o_ip = 
"172.16.24.126";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_ip="115.28.91.26";<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return 
o_ip;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; public delegate void Del_消息处理(byte[] 
v消息数据);<BR>&nbsp;&nbsp;&nbsp; public Del_消息处理 d_消息处理;<BR>&nbsp;public 
C_TcpClient(string vip,int vpo) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
GameObject gg = new 
GameObject("o_tcp通信消息监听");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
C_tcp通信消息监听 cc = 
gg.AddComponent&lt;C_tcp通信消息监听&gt;();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
cc.S_初始化(this);<BR>&nbsp;&nbsp;o_客户端实体=new 
TcpClient(vip,vpo);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o_消息数据 = new 
byte[o_客户端实体.ReceiveBufferSize];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_客户端实体.GetStream().BeginRead(o_消息数据, 0, 
System.Convert.ToInt32(o_客户端实体.ReceiveBufferSize), S_接收消息, 
null);<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; public void S_发送消息(byte 
i_字节1, byte i_字节2, string message){<BR>&nbsp;&nbsp;try 
{<BR>&nbsp;&nbsp;&nbsp;byte[] 
data=System.Text.Encoding.UTF8.GetBytes(message);<BR>&nbsp;&nbsp;&nbsp;byte[] 
data2=new 
byte[data.Length+10];<BR>&nbsp;&nbsp;&nbsp;data.CopyTo(data2,10);<BR>&nbsp;&nbsp;&nbsp;data2[0]=i_字节1;<BR>&nbsp;&nbsp;&nbsp;data2[1]=i_字节2;<BR>&nbsp;&nbsp;&nbsp;byte[] 
bb2=Encoding.UTF8.GetBytes(data2.Length.ToString("00000000"));<BR>&nbsp;&nbsp;&nbsp;Array.Copy(bb2,0,data2,2,8);<BR>&nbsp;&nbsp;&nbsp;S_输出("发送 
"+i_字节1+" "+i_字节2+"&nbsp; 
"+message,1);<BR>&nbsp;&nbsp;&nbsp;S_发送消息(data2);<BR>&nbsp;&nbsp;} 
catch(Exception ex) 
{<BR>&nbsp;&nbsp;&nbsp;S_输出("发送消息出错1253："+ex.Message,3);<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; public void S_发送消息(byte[] 
data){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
NetworkStream ns = 
o_客户端实体.GetStream();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ns.Write(data, 0, 
data.Length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ns.Flush();<BR>&nbsp;&nbsp;} catch 
{<BR>&nbsp;&nbsp;&nbsp;S_输出("发送数据___出错",3);<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; public void S_接收消息(IAsyncResult 
ar){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int 
o_消息字节长度;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lock 
(o_客户端实体.GetStream()){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_消息字节长度 = 
o_客户端实体.GetStream().EndRead(ar);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if 
(o_消息字节长度 &gt; 
0){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
try{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
byte[] bbaa = new 
byte[o_消息字节长度];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Array.Copy(o_消息数据, 0, bbaa, 0, 
o_消息字节长度);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
S_分包(bbaa);<BR>&nbsp;&nbsp;&nbsp;&nbsp;} catch(Exception ex) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S_输出("消息处理失败:"+ex.Message,3);<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; o_消息数据 = 
new 
byte[o_客户端实体.ReceiveBufferSize];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
lock 
(o_客户端实体.GetStream()){<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_客户端实体.GetStream().BeginRead(o_消息数据, 0, 
System.Convert.ToInt32(o_客户端实体.ReceiveBufferSize), S_接收消息, 
null);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;} catch(Exception ex) {<BR>&nbsp;&nbsp;&nbsp;S_输出("消息接收失败 4992 
"+ex.Message,3);<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;void 
S_分包(byte[] x新数据) {<BR>&nbsp;&nbsp;if(o_起始开关) {<BR>&nbsp;&nbsp;&nbsp;try 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;o_长数据=new 
byte[int.Parse(Encoding.UTF8.GetString(x新数据,2,8))];<BR>&nbsp;&nbsp;&nbsp;} 
catch(Exception ex) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;S_输出("sa334; 
"+ex.Message,3);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;o_起始开关=false;<BR>&nbsp;&nbsp;&nbsp;o_数据累加长度=0;<BR>&nbsp;&nbsp;&nbsp;S_分包(x新数据);<BR>&nbsp;&nbsp;} 
else {<BR>&nbsp;&nbsp;&nbsp;if(o_数据累加长度+x新数据.Length&gt;=o_长数据.Length) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;Array.Copy(x新数据,0,o_长数据,o_数据累加长度,o_长数据.Length-o_数据累加长度);<BR>&nbsp;&nbsp;&nbsp;&nbsp;try 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o_数据集.Add(o_长数据);<BR>&nbsp;&nbsp;&nbsp;&nbsp;} 
catch(Exception ex) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S_输出("消息处理出错445:"+ex.Message,3);<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;byte[] 
x数据=new 
byte[x新数据.Length-(o_长数据.Length-o_数据累加长度)];<BR>&nbsp;&nbsp;&nbsp;&nbsp;o_起始开关=true;<BR>&nbsp;&nbsp;&nbsp;&nbsp;o_数据累加长度=x数据.Length;<BR>&nbsp;&nbsp;&nbsp;&nbsp;if(x数据.Length!=0) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Array.Copy(x新数据,x新数据.Length-x数据.Length,x数据,0,x数据.Length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S_输出("粘包了______________",2);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S_分包(x数据);<BR>&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;} 
else 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;Array.Copy(x新数据,0,o_长数据,o_数据累加长度,x新数据.Length);<BR>&nbsp;&nbsp;&nbsp;&nbsp;o_数据累加长度+=x新数据.Length;<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;}<BR>&nbsp;}<BR>&nbsp;void 
S_输出(string ss,int ii) {<BR>&nbsp;&nbsp;if(ii==0) 
{<BR>&nbsp;&nbsp;&nbsp;ss="&lt;color=#00fff0&gt;"+ss+"&lt;/color&gt;";<BR>&nbsp;&nbsp;} 
else if(ii==1) 
{<BR>&nbsp;&nbsp;&nbsp;ss="&lt;color=#00ff00&gt;"+ss+"&lt;/color&gt;";<BR>&nbsp;&nbsp;} 
else if(ii==2) 
{<BR>&nbsp;&nbsp;&nbsp;ss="&lt;color=#ffff00&gt;"+ss+"&lt;/color&gt;";<BR>&nbsp;&nbsp;} 
else if(ii==3) 
{<BR>&nbsp;&nbsp;&nbsp;ss="&lt;color=#ff0000&gt;"+ss+"&lt;/color&gt;";<BR>&nbsp;&nbsp;}<BR>&nbsp;&nbsp;Debug.Log(ss);<BR>&nbsp;//&nbsp;C_输出框.ccc.S_输出(ss,ii);<BR>&nbsp;}<BR>&nbsp;&nbsp;&nbsp; 
public void S_消息监听() {<BR>&nbsp;&nbsp;&nbsp; if(o_数据集.Count&gt;0) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp; for(int i=0;i&lt;o_数据集.Count;i++) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] 
bb=o_数据集[i];<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
if(d_消息处理!=null) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
d_消息处理(bb);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
} else 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Debug.LogError("d_消息处理-delegate为空.....");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp; 
o_数据集.Clear();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; #region Del_消息处理&nbsp; 
实例代码----------------<BR>&nbsp;&nbsp;&nbsp; void S_数据监听(byte[] v消息数据) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string 
ss=System.Text.Encoding.UTF8.GetString(v消息数据,10,v消息数据.Length-10);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Debug.Log("收到----"+v消息数据[0]+v消息数据[1]+"___");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
string[] sss;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch(v消息数据[0]) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case 
0:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
switch(v消息数据[1]) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
case 
0:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
case 
1:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
case 
1:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
switch(v消息数据[0]) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
case 
0:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
case 
1:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
break;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; } 
<BR>&nbsp;&nbsp;&nbsp; #endregion<BR>}<BR>public class C_tcp通信消息监听:MonoBehaviour 
{<BR>&nbsp;&nbsp;&nbsp; C_TcpClient o_通信;<BR>&nbsp;&nbsp;&nbsp; public void 
S_初始化(C_TcpClient v通信) {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_通信=v通信;<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; void Start() { 
<BR>&nbsp;&nbsp;&nbsp; }<BR>&nbsp;&nbsp;&nbsp; void Update() 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(o_通信!=null) 
{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
o_通信.S_消息监听();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
}<BR>&nbsp;&nbsp;&nbsp; }<BR>}</P>
<P>&nbsp;</P></BODY></HTML>
